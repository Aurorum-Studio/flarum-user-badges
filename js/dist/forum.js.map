{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@v17development/flarum-user-badges/./src/common/components/UserBadge.js","webpack://@v17development/flarum-user-badges/./src/common/index.js","webpack://@v17development/flarum-user-badges/./src/common/models/Badge.js","webpack://@v17development/flarum-user-badges/./src/common/models/BadgeCategory.js","webpack://@v17development/flarum-user-badges/./src/common/models/UserBadge.js","webpack://@v17development/flarum-user-badges/./src/forum/addSidebarNav.js","webpack://@v17development/flarum-user-badges/./src/forum/components/BadgeCategoryList/BlockListView.js","webpack://@v17development/flarum-user-badges/./src/forum/components/BadgeCategoryList/TableView.js","webpack://@v17development/flarum-user-badges/./src/forum/components/BadgeItemPage.js","webpack://@v17development/flarum-user-badges/./src/forum/components/BadgeModal.js","webpack://@v17development/flarum-user-badges/./src/forum/components/BadgeUserList.js","webpack://@v17development/flarum-user-badges/./src/forum/components/BadgesOverviewPage.js","webpack://@v17development/flarum-user-badges/./src/forum/components/BadgesProfilePage.js","webpack://@v17development/flarum-user-badges/./src/forum/components/GiveBadgeModal.js","webpack://@v17development/flarum-user-badges/./src/forum/components/UserBadgeList.js","webpack://@v17development/flarum-user-badges/./src/forum/components/addBadgeListUserCard.js","webpack://@v17development/flarum-user-badges/./src/forum/index.js","webpack://@v17development/flarum-user-badges/./src/forum/notification/BadgeReceivedNotification.js","webpack://@v17development/flarum-user-badges/./src/forum/states/UserBadgeListState.js","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['Model']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['common/Component']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['common/app']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['common/extend']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['common/states/PaginatedListState']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['components/Button']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['components/IndexPage']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['components/Link']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['components/LinkButton']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['components/Modal']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['components/Page']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['components/Select']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['components/UserPage']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['extend']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['helpers/avatar']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['helpers/fullTime']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['helpers/humanTime']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['models/User']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['utils/Stream']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['utils/UserControls']\"","webpack://@v17development/flarum-user-badges/external root \"flarum.core.compat['utils/mixin']\"","webpack://@v17development/flarum-user-badges/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@v17development/flarum-user-badges/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-user-badges/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@v17development/flarum-user-badges/webpack/bootstrap","webpack://@v17development/flarum-user-badges/webpack/runtime/compat get default export","webpack://@v17development/flarum-user-badges/webpack/runtime/define property getters","webpack://@v17development/flarum-user-badges/webpack/runtime/hasOwnProperty shorthand","webpack://@v17development/flarum-user-badges/webpack/runtime/make namespace object","webpack://@v17development/flarum-user-badges/./forum.js"],"sourcesContent":["import Component from \"flarum/common/Component\";\nimport Tooltip from \"flarum/common/components/Tooltip\";\nimport BadgeModal from \"../../forum/components/BadgeModal\";\n\nexport default class UserBadge extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.tooltip = this.attrs.tooltip !== false;\n    this.forceVisibility = this.attrs.forceVisibility === true;\n  }\n\n  view() {\n    // Hide badge when not enabled\n    if (!this.attrs.badge.isVisible() && !this.forceVisibility) {\n      return null;\n    }\n\n    // Just show badge\n    if (this.tooltip === false) return this.badge();\n\n    return (\n      <Tooltip\n        text={`${\n          this.attrs.badge.description() ? this.attrs.badge.description() : \"\"\n        }`}\n      >\n        {this.badge()}\n      </Tooltip>\n    );\n  }\n\n  badge() {\n    const isPartlyHidden =\n      !this.attrs.badge.isVisible() && this.forceVisibility;\n\n    // This badge is an image\n    if (this.attrs.badge.image()) {\n      return (\n        <img\n          src={this.attrs.badge.image()}\n          className={\"UserBadgeImage\"}\n          onclick={() => {\n            if (this.attrs.onclick) {\n              this.attrs.onclick();\n            }\n          }}\n          style={{\n            opacity: isPartlyHidden ? 0.5 : undefined,\n          }}\n        />\n      );\n    }\n\n    return (\n      <span\n        className={`UserBadge UserBadge-${this.attrs.badge.id()}`}\n        onclick={() => {\n          if (this.attrs.onclick) {\n            this.attrs.onclick();\n          }\n        }}\n        style={{\n          backgroundColor: this.attrs.badge.backgroundColor(),\n          color: this.attrs.badge.labelColor(),\n          borderColor: this.attrs.badge.backgroundColor(),\n          opacity: isPartlyHidden ? 0.5 : undefined,\n        }}\n      >\n        <i\n          className={this.attrs.badge.icon()}\n          style={{ color: this.attrs.badge.iconColor() }}\n        />{\" \"}\n        {this.attrs.badge.name()}\n      </span>\n    );\n  }\n}\n","import app from 'flarum/common/app';\n\napp.initializers.add('v17development/flarum-user-badges', () => {\n  // console.log('[v17development/flarum-user-badges] Hello, forum and admin!')\n});\n","import Model from \"flarum/Model\";\nimport mixin from \"flarum/utils/mixin\";\nimport BadgeModal from \"../../forum/components/BadgeModal\";\n\nexport default class Badge extends mixin(Model, {\n  name: Model.attribute(\"name\"),\n  icon: Model.attribute(\"icon\"),\n  order: Model.attribute(\"order\"),\n  image: Model.attribute(\"image\"),\n  description: Model.attribute(\"description\"),\n  isVisible: Model.attribute(\"isVisible\"),\n  createdAt: Model.attribute(\"createdAt\"),\n  earnedAmount: Model.attribute(\"earnedAmount\"),\n  category: Model.hasOne(\"category\"),\n  backgroundColor: Model.attribute(\"backgroundColor\"),\n  iconColor: Model.attribute(\"iconColor\"),\n  labelColor: Model.attribute(\"labelColor\"),\n}) {\n  apiEndpoint() {\n    return \"/badges\" + (this.exists ? \"/\" + this.data.id : \"\");\n  }\n}\n","import Model from \"flarum/Model\";\nimport mixin from \"flarum/utils/mixin\";\n\nexport default class BadgeCategory extends mixin(Model, {\n  name: Model.attribute(\"name\"),\n  order: Model.attribute(\"order\"),\n  description: Model.attribute(\"description\"),\n  isEnabled: Model.attribute(\"isEnabled\"),\n  createdAt: Model.attribute(\"createdAt\"),\n  isTable: Model.attribute(\"isTable\"),\n  users: Model.hasMany(\"users\"),\n  badges: Model.hasMany(\"badges\"),\n}) {\n  apiEndpoint() {\n    return \"/badge_categories\" + (this.exists ? \"/\" + this.data.id : \"\");\n  }\n}\n","import Model from \"flarum/Model\";\nimport mixin from \"flarum/utils/mixin\";\n\nexport default class UserBadge extends mixin(Model, {\n  user: Model.hasOne(\"user\"),\n  badge: Model.hasOne(\"badge\"),\n  description: Model.attribute(\"description\"),\n  isPrimary: Model.attribute(\"isPrimary\"),\n  assignedAt: Model.attribute(\"assignedAt\"),\n}) {\n  apiEndpoint() {\n    return \"/user_badges\" + (this.exists ? \"/\" + this.data.id : \"\");\n  }\n}\n","import { extend } from \"flarum/extend\";\nimport IndexPage from \"flarum/components/IndexPage\";\nimport LinkButton from \"flarum/components/LinkButton\";\n\nexport default function addSidebarNav() {\n  extend(IndexPage.prototype, \"navItems\", function (items) {\n    items.add(\n      \"badges\",\n      <LinkButton icon=\"fas fa-id-badge\" href={app.route(\"badges\")}>\n        {app.translator.trans(\n          \"v17development-flarum-badges.forum.badge.badges\"\n        )}\n      </LinkButton>,\n      15\n    );\n\n    return items;\n  });\n}\n","import Component from \"flarum/common/Component\";\nimport Link from \"flarum/components/Link\";\nimport UserBadge from \"../../../common/components/UserBadge\";\n\nexport default class BlockListView extends Component {\n  view() {\n    if (!this.attrs.badges) {\n      return null;\n    }\n\n    const badges = this.attrs.badges;\n\n    return (\n      <ul className={\"BadgeCategoryList\"}>\n        {badges.map((badge) => {\n          return (\n            <li>\n              <Link\n                href={app.route(\"badges.item\", { id: badge.id() })}\n                className={\"BadgeContainer\"}\n              >\n                <div className={\"BadgeContainerInfo\"}>\n                  <UserBadge badge={badge} tooltip={false} />\n\n                  <p className={\"BadgeDescription\"}>{badge.description()}</p>\n\n                  <p>\n                    {app.translator.trans(\n                      \"v17development-flarum-badges.forum.badge.earned_count\",\n                      {\n                        count: badge.earnedAmount(),\n                      }\n                    )}\n                  </p>\n                </div>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport Link from \"flarum/components/Link\";\nimport UserBadge from \"../../../common/components/UserBadge\";\n\nexport default class TableView extends Component {\n  view() {\n    if (!this.attrs.badges) {\n      return null;\n    }\n\n    const badges = this.attrs.badges;\n\n    return (\n      <table width={\"100%\"} className={\"BadgeTable\"}>\n        <thead>\n          <tr>\n            <th scope=\"col\">\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.badge.badges\"\n              )}\n            </th>\n            <th scope=\"col\">\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.badge.description\"\n              )}\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {badges.map((badge) => {\n            return (\n              <tr>\n                <td>\n                  <Link href={app.route(\"badges.item\", { id: badge.id() })}>\n                    <UserBadge badge={badge} tooltip={false} />\n                  </Link>\n                </td>\n                <td>\n                  {badge.description()}\n\n                  <div className={\"BadgeTableRewarded\"}>\n                    {app.translator.trans(\n                      \"v17development-flarum-badges.forum.badge.earned_count\",\n                      {\n                        count: badge.earnedAmount(),\n                      }\n                    )}\n                  </div>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n","import Page from \"flarum/components/Page\";\nimport IndexPage from \"flarum/components/IndexPage\";\nimport listItems from \"flarum/common/helpers/listItems\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport LinkButton from \"flarum/components/LinkButton\";\nimport BadgeUserList from \"./BadgeUserList\";\n\nexport default class BadgeItemPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.bodyClass = \"App--index\";\n\n    const found = app.store.getById(\"badges\", m.route.param(\"id\"));\n\n    this.loading = !found;\n\n    if (!found) {\n      // Load badge categories\n      app.store.find(`badges/${m.route.param(\"id\")}`).then((badge) => {\n        this.loading = false;\n\n        app.history.push(\"badgeItemPage\", badge.name());\n\n        this.setTitle(badge);\n\n        m.redraw();\n      });\n    } else {\n      app.history.push(\"badgeItemPage\", found.name());\n\n      this.setTitle(found);\n    }\n  }\n\n  setTitle(badge) {\n    app.setTitle(\n      `${badge.name()} - ${app.translator.trans(\n        \"v17development-flarum-badges.forum.badge.badges\"\n      )}`\n    );\n  }\n\n  view() {\n    const badge = app.store.getById(\"badges\", m.route.param(\"id\"));\n\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()}\n\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"IndexPage-results sideNavOffset\">\n              <LinkButton\n                href={app.route(\"badges\")}\n                icon={\"fas fa-chevron-left\"}\n                className={\"Button BadgesOverviewButton\"}\n              >\n                {app.translator.trans(\n                  \"v17development-flarum-badges.forum.badge.badges\"\n                )}\n              </LinkButton>\n\n              {this.loading && <LoadingIndicator size={\"large\"} />}\n\n              {!this.loading && (\n                <div className={\"BadgeUserListInfo\"}>\n                  <i className={badge.icon()} />\n\n                  <div className={\"BadgeUserListInfo-meta\"}>\n                    <h3>{badge.name()}</h3>\n                    <p>{badge.description()}</p>\n                  </div>\n                </div>\n              )}\n\n              {badge && (\n                <h3>\n                  {app.translator.trans(\n                    \"v17development-flarum-badges.forum.badge.earned_by_count\",\n                    {\n                      count: badge.earnedAmount(),\n                    }\n                  )}\n                </h3>\n              )}\n\n              {!this.loading &&\n                app.forum.attribute(\"canViewDetailedBadgeUsers\") && (\n                  <BadgeUserList\n                    state={app.userBadgeListState}\n                    badgeId={badge.id()}\n                  />\n                )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\nimport fullTime from \"flarum/helpers/fullTime\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport LinkButton from \"flarum/components/LinkButton\";\nimport GiveBadgeModal from \"./GiveBadgeModal\";\n\nexport default class BadgeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = false;\n  }\n\n  className() {\n    return \"Modal--small\";\n  }\n\n  title() {\n    return app.translator.trans(\n      \"v17development-flarum-badges.forum.badge_information\"\n    );\n  }\n\n  content() {\n    return (\n      <div>\n        <div className=\"Modal-body\">{this.data().toArray()}</div>\n        <div className=\"Modal-footer\">\n          <LinkButton\n            href={app.route(\"badges.item\", {\n              id: this.attrs.badge.id(),\n            })}\n            className={\"Button\"}\n            style={{\n              margin: \"0 10px\",\n            }}\n          >\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.badge_details\"\n            )}\n          </LinkButton>\n\n          {this.attrs.userBadgeData && app.forum.attribute(\"canGiveBadge\") && (\n            <Button\n              className={\"Button Button--primary\"}\n              onclick={() => {\n                if (\n                  confirm(\n                    app.translator.trans(\n                      \"v17development-flarum-badges.forum.moderation.remove_badge_confirm\"\n                    )\n                  )\n                ) {\n                  this.loading = true;\n                  this.attrs.userBadgeData.delete().then(() => this.hide());\n                }\n              }}\n              loading={this.loading}\n            >\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.moderation.remove_badge\"\n              )}\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  data() {\n    const items = new ItemList();\n\n    // Badge name\n    items.add(\n      \"name\",\n      <div className={\"BadgeModalListItem\"}>\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.name\"\n            )}\n            :\n          </b>\n        </p>\n        <p>{this.attrs.badge.name()}</p>\n      </div>\n    );\n\n    // Badge description\n    items.add(\n      \"description\",\n      <div className={\"BadgeModalListItem\"}>\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.description\"\n            )}\n            :\n          </b>\n        </p>\n        <p>{this.attrs.badge.description()}</p>\n      </div>\n    );\n\n    // Badge earning reason\n    if (\n      this.attrs.userBadgeData &&\n      (this.attrs.userBadgeData.description() ||\n        app.forum.attribute(\"canGiveBadge\"))\n    ) {\n      items.add(\n        \"earning_reason\",\n        <div className={\"BadgeModalListItem\"}>\n          <p>\n            <b>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.badge.earning_reason\"\n              )}\n              :\n            </b>\n          </p>\n\n          <p>\n            {this.attrs.userBadgeData.description() ? (\n              this.attrs.userBadgeData.description()\n            ) : (\n              <i>\n                {app.translator.trans(\n                  \"v17development-flarum-badges.forum.badge.no_earning_reason\"\n                )}\n              </i>\n            )}\n          </p>\n          <p>\n            {app.forum.attribute(\"canGiveBadge\") && (\n              <a\n                href={\"#\"}\n                onclick={(e) => {\n                  e.preventDefault();\n                  app.modal.show(GiveBadgeModal, {\n                    badge: this.attrs.userBadgeData,\n                  });\n                }}\n              >\n                {app.translator.trans(\n                  \"v17development-flarum-badges.forum.badge.update_earning_reason\"\n                )}\n              </a>\n            )}\n          </p>\n        </div>\n      );\n    }\n\n    // Badge earned on\n    if (this.attrs.userBadgeData) {\n      items.add(\n        \"earned_date\",\n        <div className={\"BadgeModalListItem\"}>\n          <p>\n            <b>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.badge.earned_on\"\n              )}\n              :\n            </b>\n          </p>\n          <p>{fullTime(this.attrs.userBadgeData.assignedAt())}</p>\n        </div>\n      );\n    }\n\n    // Badge category\n    if (this.attrs.userBadgeData) {\n      items.add(\n        \"category\",\n        <div className={\"BadgeModalListItem\"}>\n          <p>\n            <b>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.badge.category\"\n              )}\n              :\n            </b>\n          </p>\n          <p>\n            {this.attrs.badge.category() && this.attrs.badge.category().name()}\n\n            {/* Uncategorized */}\n            {!this.attrs.badge.category() &&\n              app.translator.trans(\n                \"v17development-flarum-badges.forum.uncategorized\"\n              )}\n            {/* <Link\n              href={app.route(\"badges.category\", {\n                category: this.attrs.badge.category().id(),\n              })}\n            >\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.all_badges\"\n              )}\n            </Link> */}\n          </p>\n        </div>\n      );\n    }\n\n    // Badge category\n    if (this.attrs.badge && this.attrs.badge.earnedAmount()) {\n      items.add(\n        \"earned_amount\",\n        <div className={\"BadgeModalListItem\"}>\n          <p>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.earned_count\",\n              {\n                count: this.attrs.badge.earnedAmount(),\n              }\n            )}\n          </p>\n        </div>\n      );\n    }\n\n    return items;\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport Button from \"flarum/components/Button\";\nimport Link from \"flarum/components/Link\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport avatar from \"flarum/helpers/avatar\";\nimport humanTime from \"flarum/helpers/humanTime\";\n\nexport default class BadgeUserList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    // Load articles\n    this.attrs.state.refreshParams({\n      filter: {\n        badge: this.attrs.badgeId,\n      },\n      sort: \"-assignedAt\",\n    });\n  }\n\n  view() {\n    const state = this.attrs.state;\n\n    let loading = null;\n\n    if (state.isInitialLoading() || state.isLoadingNext()) {\n      loading = LoadingIndicator.component({\n        size: \"large\",\n      });\n    } else if (state.hasNext()) {\n      loading = Button.component(\n        {\n          className: \"Button\",\n          icon: \"fas fa-chevron-down\",\n          onclick: state.loadNext.bind(state),\n        },\n        app.translator.trans(\"core.forum.discussion_list.load_more_button\")\n      );\n    }\n\n    // No items\n    if (state.isInitialLoading() && state.isEmpty()) {\n      return <LoadingIndicator />;\n    }\n\n    // No items\n    if (state.isEmpty()) {\n      return (\n        <div className={\"BadgeUserList-empty\"}>\n          {app.translator.trans(\n            \"v17development-flarum-badges.forum.no_received\"\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <ul className={\"BadgeUserList\"}>\n          {state.getPages().map((pg) => {\n            return pg.items.map((userBadge) => {\n              return (\n                <li>\n                  <Link\n                    href={app.route(\"user.badges\", {\n                      username: userBadge.user().username(),\n                    })}\n                    className={\"BadgeUserList-user\"}\n                  >\n                    {avatar(userBadge.user())}\n\n                    <div className={\"BadgeUserList-userinfo\"}>\n                      <h4>{userBadge.user().displayName()}</h4>\n\n                      <p>\n                        {app.translator.trans(\n                          \"v17development-flarum-badges.forum.badge.received_on\",\n                          {\n                            date: humanTime(userBadge.assignedAt()),\n                          }\n                        )}\n                      </p>\n                    </div>\n                  </Link>\n                </li>\n              );\n            });\n          })}\n        </ul>\n\n        {loading && <div className=\"SupportSearchList-loadMore\">{loading}</div>}\n      </div>\n    );\n  }\n}\n","import Page from \"flarum/components/Page\";\nimport IndexPage from \"flarum/components/IndexPage\";\nimport listItems from \"flarum/common/helpers/listItems\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport TableView from \"./BadgeCategoryList/TableView\";\nimport BlockListView from \"./BadgeCategoryList/BlockListView\";\n\nexport default class BadgesOverviewPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.bodyClass = \"App--index\";\n\n    this.loading = true;\n\n    app.history.push(\"badgeOverviewPage\");\n\n    app.setTitle(\n      app.translator.trans(\"v17development-flarum-badges.forum.badge.badges\")\n    );\n\n    // Load badge categories\n    app.store.find(\"badge_categories\").then(() => {\n      this.loading = false;\n\n      m.redraw();\n    });\n  }\n\n  view() {\n    const categories = app.store\n      .all(\"badgeCategories\")\n      .sort((a, b) => a.order() - b.order());\n\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()}\n\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"IndexPage-results sideNavOffset\">\n              <h2 className={\"BadgeOverviewTitle\"}>\n                {app.translator.trans(\n                  \"v17development-flarum-badges.forum.badge.badges\"\n                )}\n              </h2>\n\n              {this.loading && <LoadingIndicator size={\"large\"} />}\n\n              {!this.loading &&\n                categories.map((category) => {\n                  const badges = category\n                    .badges()\n                    .sort((a, b) => a.order() - b.order());\n\n                  return (\n                    <div className={\"BadgeCategory\"}>\n                      <h3>{category.name()}</h3>\n                      {category.description() && (\n                        <p>{category.description()}</p>\n                      )}\n\n                      {category.isTable() && <TableView badges={badges} />}\n\n                      {!category.isTable() && <BlockListView badges={badges} />}\n                    </div>\n                  );\n                })}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import UserPage from \"flarum/components/UserPage\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport UserBadgeList from \"./UserBadgeList\";\n\nexport default class BadgesProfilePage extends UserPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.user = null;\n\n    this.loading = true;\n\n    this.loadUser(m.route.param(\"username\"));\n  }\n\n  content() {\n    if (!this.user || this.loading) {\n      return <LoadingIndicator size={46} />;\n    }\n\n    return UserBadgeList.component({\n      user: this.user,\n    });\n  }\n\n  show(user) {\n    super.show(user);\n    this.user = user;\n\n    app.store\n      .find(\"users\", user.id(), {\n        include: \"userBadges,userBadges.badge,userBadges.badge.category\",\n      })\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","import Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport Select from \"flarum/components/Select\";\nimport Stream from \"flarum/utils/Stream\";\nimport BadgeModal from \"./BadgeModal\";\n\nexport default class GiveBadgeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    // Select image\n    this.selectedBadge = this.attrs.badge ? this.attrs.badge.badge() : null;\n\n    // Current user\n    this.user = this.attrs.badge ? this.attrs.badge.user() : this.attrs.user;\n\n    // User has badge\n    this.userHasBadge = false;\n\n    // Badge model\n    this.badge = this.attrs.badge\n      ? this.attrs.badge\n      : app.store.createRecord(\"userBadges\");\n\n    // Earning reason\n    this.description = Stream(this.badge.description());\n\n    // List of available bagges\n    this.categories = {};\n\n    this.uncategorizedBadges = [];\n\n    this.loading = false;\n\n    // Load all available badges\n    if (!this.attrs.badge) {\n      this.loading = true;\n\n      app.store\n        .find(\"badges\", {\n          include: \"category\",\n        })\n        .then((badges) => {\n          badges.forEach((badge) => {\n            // Categorized\n            if (badge.category()) {\n              const category = badge.category();\n\n              if (!this.categories[category.id()]) {\n                this.categories[category.id()] = {\n                  category,\n                  badges: [badge],\n                };\n              } else {\n                this.categories[category.id()].badges.push(badge);\n              }\n            }\n            // Uncategorized\n            else {\n              this.uncategorizedBadges.push(badge);\n            }\n          });\n\n          this.loading = false;\n\n          // Redraw\n          m.redraw();\n        });\n    }\n  }\n\n  className() {\n    return \"Modal--small BadgeModal\";\n  }\n\n  title() {\n    return app.translator.trans(\n      `v17development-flarum-badges.forum.${\n        this.badge.exists ? \"update\" : \"give\"\n      }_badge`\n    );\n  }\n\n  content() {\n    return (\n      <div>\n        <div className=\"Modal-body\">\n          <div className=\"Form\">{this.fields().toArray()}</div>\n        </div>\n\n        <div className=\"Modal-footer\">\n          <Button\n            className={\"Button Button--primary\"}\n            type={\"submit\"}\n            loading={this.loading}\n            disabled={this.userHasBadge}\n          >\n            {app.translator.trans(\"core.forum.composer_edit.submit_button\")}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    // Badge selector\n    items.add(\n      \"badge\",\n      <div className=\"BadgeModalListItem\">\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.badge\"\n            )}\n          </b>\n        </p>\n\n        <div className={\"Select\"}>\n          <select\n            value={this.selectedBadge ? this.selectedBadge.id() : \"empty\"}\n            disabled={!!this.attrs.badge}\n            onchange={(e) => {\n              if (e.target.value === \"empty\") return;\n              this.selectedBadge = app.store.getById(\"badges\", e.target.value);\n\n              // Check if the user already has this badge\n              this.checkUserHasBadge(this.selectedBadge);\n            }}\n            className=\"Select-input FormControl\"\n          >\n            <option value={\"empty\"}>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.select_badge\"\n              )}\n            </option>\n\n            {/* When no badge is selected, show all available badges */}\n            {!this.attrs.badge &&\n              Object.values(this.categories).map(({ category, badges }) => (\n                <optgroup label={category.name()}>\n                  {badges.map((badge) => (\n                    <option value={badge.id()}>{badge.name()}</option>\n                  ))}\n                </optgroup>\n              ))}\n\n            {!this.attrs.badge && this.uncategorizedBadges.length >= 1 && (\n              <optgroup\n                label={app.translator.trans(\n                  \"v17development-flarum-badges.forum.uncategorized\"\n                )}\n              >\n                {this.uncategorizedBadges.map((badge) => (\n                  <option value={badge.id()}>{badge.name()}</option>\n                ))}\n              </optgroup>\n            )}\n\n            {/* When a badge is already assigned */}\n            {!!this.attrs.badge && (\n              <option value={this.selectedBadge.id()}>\n                {this.selectedBadge.name()}\n              </option>\n            )}\n          </select>\n          <i class=\"icon fas fa-caret-down Select-caret\"></i>\n        </div>\n\n        {this.userHasBadge && (\n          <p className={\"UserHasBadge\"}>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.user_has_badge\"\n            )}\n          </p>\n        )}\n      </div>,\n      30\n    );\n\n    // Badge description\n    items.add(\n      \"badge_description\",\n      <div className={\"BadgeModalListItem\"}>\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.description\"\n            )}\n            :\n          </b>\n        </p>\n        <p>\n          {this.selectedBadge\n            ? this.selectedBadge.description()\n            : app.translator.trans(\n                \"v17development-flarum-badges.forum.select_badge\"\n              )}\n        </p>\n      </div>,\n      30\n    );\n\n    // Badge earning reason\n    items.add(\n      \"description\",\n      <div className=\"BadgeModalListItem\">\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.earning_reason\"\n            )}\n          </b>\n        </p>\n        <textarea\n          className=\"FormControl\"\n          placeholder={app.translator.trans(\n            \"v17development-flarum-badges.forum.badge.earning_reason\"\n          )}\n          bidi={this.description}\n        />\n      </div>,\n      30\n    );\n\n    return items;\n  }\n\n  checkUserHasBadge(badge) {\n    let foundBadge = false;\n\n    this.user.userBadges().map((userBadge) => {\n      if (userBadge.badge() == badge) {\n        foundBadge = true;\n      }\n    });\n\n    this.userHasBadge = foundBadge;\n\n    m.redraw();\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    this.badge\n      .save({\n        description: this.description(),\n        relationships: this.attrs.badge\n          ? {}\n          : {\n              badge: this.selectedBadge,\n              user: this.user,\n            },\n      })\n      .then(\n        () => {\n          // Re-open badge modal\n          if (this.attrs.badge) {\n            app.modal.show(BadgeModal, {\n              badge: this.attrs.badge.badge(),\n              userBadgeData: this.attrs.badge,\n            });\n          } else {\n            this.hide();\n          }\n\n          m.redraw();\n        },\n        (response) => {\n          this.loading = false;\n          this.handleErrors(response);\n        }\n      );\n  }\n}\n","import Component from \"flarum/common/Component\";\nimport UserBadge from \"../../common/components/UserBadge\";\nimport BadgeModal from \"./BadgeModal\";\n\nexport default class UserBadgeList extends Component {\n  view() {\n    const categories = {};\n    const uncategorized = [];\n\n    this.attrs.user.userBadges().map((userBadge) => {\n      if (!userBadge) return null;\n\n      // Categorized\n      if (userBadge.badge().category()) {\n        const category = userBadge.badge().category();\n\n        if (!categories[category.id()]) {\n          categories[category.id()] = {\n            category,\n            badges: [userBadge],\n          };\n        } else {\n          categories[category.id()].badges.push(userBadge);\n        }\n      }\n      // Uncategorized\n      else {\n        uncategorized.push(userBadge);\n      }\n    });\n\n    return (\n      <div className=\"UserBadges\">\n        {Object.keys(categories).length === 0 && (\n          <div className={\"Placeholder\"}>\n            <p>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.user_no_badges\"\n              )}\n            </p>\n          </div>\n        )}\n\n        {Object.keys(categories).length >= 1 &&\n          Object.keys(categories)\n            .sort(\n              (a, b) =>\n                categories[a].category.order() - categories[b].category.order()\n            )\n            .map((id) => {\n              const category = categories[id].category;\n              const badges = categories[id].badges;\n\n              if (!category.isEnabled()) return null;\n\n              return (\n                <div className={\"UserBadgesCategory\"}>\n                  <h3>{category.name()}</h3>\n\n                  {category.description() && <p>{category.description()}</p>}\n\n                  {badges\n                    .sort((a, b) => a.badge().order() - b.badge().order())\n                    .map((userBadge) => (\n                      <UserBadge\n                        badge={userBadge.badge()}\n                        onclick={() =>\n                          app.modal.show(BadgeModal, {\n                            badge: userBadge.badge(),\n                            userBadgeData: userBadge,\n                          })\n                        }\n                      />\n                    ))}\n                </div>\n              );\n            })}\n\n        {/* Uncategorized badges */}\n        {uncategorized.length >= 1 && (\n          <div className={\"UserBadgesCategory\"}>\n            <h3>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.uncategorized\"\n              )}\n            </h3>\n\n            {uncategorized\n              .sort((a, b) => a.badge().order() - b.badge().order())\n              .map((userBadge) => (\n                <UserBadge\n                  badge={userBadge.badge()}\n                  onclick={() =>\n                    app.modal.show(BadgeModal, {\n                      badge: userBadge.badge(),\n                      userBadgeData: userBadge,\n                    })\n                  }\n                />\n              ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport UserBadge from '../../common/components/UserBadge';\nimport BadgeModal from './BadgeModal';\n\nexport default function addBadgeListUserCard() {\n  extend(UserCard.prototype, 'infoItems', function (items) {\n    const userBadges = this.attrs.user.userBadges();\n\n    items.add(\n      'badges',\n      userBadges.map((userBadge) => (\n        <UserBadge\n          badge={ userBadge.badge() }\n          onclick={ () =>\n            app.modal.show(BadgeModal, {\n              badge: userBadge.badge(),\n              userBadgeData: userBadge,\n            })\n          }\n        />\n      ))\n    );\n  })\n}\n\n","import { extend } from \"flarum/extend\";\nimport Model from \"flarum/Model\";\nimport User from \"flarum/models/User\";\nimport UserPage from \"flarum/components/UserPage\";\nimport UserControls from \"flarum/utils/UserControls\";\nimport LinkButton from \"flarum/components/LinkButton\";\nimport Button from \"flarum/components/Button\";\nimport Badge from \"../common/models/Badge\";\nimport BadgeCategory from \"../common/models/BadgeCategory\";\nimport UserBadge from \"../common/models/UserBadge\";\nimport BadgesProfilePage from \"./components/BadgesProfilePage\";\nimport BadgesOverviewPage from \"./components/BadgesOverviewPage\";\nimport BadgeItemPage from \"./components/BadgeItemPage\";\nimport GiveBadgeModal from \"./components/GiveBadgeModal\";\nimport addSidebarNav from \"./addSidebarNav\";\nimport UserBadgeListState from \"./states/UserBadgeListState\";\nimport BadgeReceivedNotification from \"./notification/BadgeReceivedNotification\";\nimport NotificationGrid from \"flarum/forum/components/NotificationGrid\";\nimport addBadgeListUserCard from './components/addBadgeListUserCard';\n\napp.initializers.add(\"v17development-flarum-badges\", (app) => {\n  app.store.models.badges = Badge;\n  app.store.models.badgeCategories = BadgeCategory;\n  app.store.models.userBadges = UserBadge;\n\n  User.prototype.userBadges = Model.hasMany(\"userBadges\");\n  User.prototype.userPrimaryBadge = Model.hasOne(\"userPrimaryBadge\");\n\n  // Add user badges to the user profile\n  app.routes[\"user.badges\"] = {\n    path: \"/u/:username/badges\",\n    component: BadgesProfilePage,\n  };\n\n  // Badges overview page\n  app.routes.badges = {\n    path: \"/badges\",\n    component: BadgesOverviewPage,\n  };\n\n  // Future\n  // // Badges overview page\n  // app.routes[\"badges.category\"] = {\n  //   path: \"/badges/category/:id\",\n  //   component: BadgesOverviewPage,\n  // };\n\n  // Badge item page\n  app.routes[\"badges.item\"] = {\n    path: \"/badges/:id\",\n    component: BadgeItemPage,\n  };\n\n  addSidebarNav();\n\n  app.userBadgeListState = new UserBadgeListState({});\n\n  // Badge received notification\n  app.notificationComponents.badgeReceived = BadgeReceivedNotification;\n\n  // Enable badge notifications?\n  extend(NotificationGrid.prototype, \"notificationTypes\", function (items) {\n    items.add(\"badgeReceived\", {\n      name: \"badgeReceived\",\n      icon: \"fas fa-user-tag\",\n      label: app.translator.trans(\n        \"v17development-flarum-badges.forum.notification.settings\"\n      ),\n    });\n  });\n\n  // Add uploads to user page menu items\n  extend(UserPage.prototype, \"navItems\", function (items) {\n    items.add(\n      \"badges\",\n      LinkButton.component(\n        {\n          href: app.route(\"user.badges\", {\n            username: this.user.username(),\n          }),\n          name: \"badges\",\n          icon: \"fas fa-user-tag\",\n        },\n        [\n          app.translator.trans(\n            \"v17development-flarum-badges.forum.badge.badges\"\n          ),\n          <span className=\"Button-badge\">{this.user.userBadges().length}</span>,\n        ]\n      ),\n      90\n    );\n  });\n\n  extend(UserControls, \"moderationControls\", function (items, user) {\n    // User can give badges\n    if (app.forum.attribute(\"canGiveBadge\")) {\n      items.add(\n        \"test\",\n        <Button\n          icon=\"fas fa-user-tag\"\n          onclick={() =>\n            app.modal.show(GiveBadgeModal, {\n              user: user,\n            })\n          }\n        >\n          {app.translator.trans(\n            \"v17development-flarum-badges.forum.give_badge\"\n          )}\n        </Button>\n      );\n    }\n  });\n  addBadgeListUserCard()\n});\n","import Notification from \"flarum/forum/components/Notification\";\n\nexport default class BadgeReceivedNotification extends Notification {\n  icon() {\n    return \"\";\n  }\n\n  href() {\n    return app.route(\"user.badges\", {\n      username: app.session.user.username(),\n    });\n  }\n\n  content() {\n    return app.translator.trans(\n      \"v17development-flarum-badges.forum.notification.title\"\n    );\n  }\n\n  excerpt() {\n    const subject = this.attrs.notification.subject();\n\n    return (\n      <div>\n        <i className={`icon ${subject.badge().icon()}`} />\n\n        {subject.badge().name()}\n      </div>\n    );\n  }\n}\n","import PaginatedListState from \"flarum/common/states/PaginatedListState\";\n\nexport default class UserBadgeListState extends PaginatedListState {\n  constructor(params, page = 1) {\n    super(params, page, 18);\n  }\n\n  get type() {\n    return \"user_badges\";\n  }\n}\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['common/states/PaginatedListState'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/Link'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['forum/components/Notification'];","module.exports = flarum.core.compat['forum/components/NotificationGrid'];","module.exports = flarum.core.compat['forum/components/UserCard'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/fullTime'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['utils/mixin'];","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/forum';\n"],"names":["Component","Tooltip","BadgeModal","UserBadge","oninit","vnode","tooltip","attrs","forceVisibility","view","badge","isVisible","description","isPartlyHidden","image","onclick","opacity","undefined","id","backgroundColor","color","labelColor","borderColor","icon","iconColor","name","app","initializers","add","Model","mixin","Badge","apiEndpoint","exists","data","attribute","order","createdAt","earnedAmount","category","hasOne","BadgeCategory","isEnabled","isTable","users","hasMany","badges","user","isPrimary","assignedAt","extend","IndexPage","LinkButton","addSidebarNav","prototype","items","route","translator","trans","Link","BlockListView","map","count","TableView","Page","listItems","LoadingIndicator","BadgeUserList","BadgeItemPage","bodyClass","found","store","getById","m","param","loading","find","then","history","push","setTitle","redraw","hero","sidebarItems","toArray","forum","userBadgeListState","Modal","Button","fullTime","ItemList","GiveBadgeModal","className","title","content","margin","userBadgeData","confirm","hide","e","preventDefault","modal","show","avatar","humanTime","state","refreshParams","filter","badgeId","sort","isInitialLoading","isLoadingNext","component","size","hasNext","loadNext","bind","isEmpty","getPages","pg","userBadge","username","displayName","date","BadgesOverviewPage","categories","all","a","b","UserPage","UserBadgeList","BadgesProfilePage","loadUser","include","Select","Stream","selectedBadge","userHasBadge","createRecord","uncategorizedBadges","forEach","fields","target","value","checkUserHasBadge","Object","values","length","foundBadge","userBadges","onsubmit","save","relationships","response","handleErrors","uncategorized","keys","UserCard","addBadgeListUserCard","User","UserControls","UserBadgeListState","BadgeReceivedNotification","NotificationGrid","models","badgeCategories","userPrimaryBadge","routes","path","notificationComponents","badgeReceived","label","href","Notification","session","excerpt","subject","notification","PaginatedListState","params","page","_defineProperties","props","i","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","Constructor","protoProps","staticProps","setPrototypeOf","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","__proto__"],"sourceRoot":""}