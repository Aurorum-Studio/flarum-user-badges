{"version":3,"sources":["webpack://@v17development/flarum-badges/webpack/bootstrap","webpack://@v17development/flarum-badges/./forum.js","webpack://@v17development/flarum-badges/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-badges/./node_modules/@babel/runtime/helpers/inheritsLoose/_index.mjs","webpack://@v17development/flarum-badges/./node_modules/@babel/runtime/helpers/setPrototypeOf/index.js","webpack://@v17development/flarum-badges/./src/common/models/Badge.js","webpack://@v17development/flarum-badges/./src/common/models/BadgeCategory.js","webpack://@v17development/flarum-badges/./src/common/models/UserBadge.js","webpack://@v17development/flarum-badges/./src/forum/components/BadgeItemPage.js","webpack://@v17development/flarum-badges/./src/forum/components/BadgeModal.js","webpack://@v17development/flarum-badges/./src/forum/components/BadgesOverviewPage.js","webpack://@v17development/flarum-badges/./src/forum/components/BadgesProfilePage.js","webpack://@v17development/flarum-badges/./src/forum/components/GiveBadgeModal.js","webpack://@v17development/flarum-badges/./src/forum/components/UserBadge.js","webpack://@v17development/flarum-badges/./src/forum/components/UserBadgeList.js","webpack://@v17development/flarum-badges/./src/forum/index.js","webpack://@v17development/flarum-badges/external \"flarum.core.compat['Component']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['Model']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Button']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Link']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/LinkButton']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Modal']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Page']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Select']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/UserPage']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['extend']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['helpers/fullTime']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['models/User']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['utils/ItemList']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['utils/Stream']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['utils/UserControls']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['utils/mixin']\""],"names":["Badge","apiEndpoint","exists","data","id","mixin","Model","name","attribute","icon","order","image","description","isVisible","createdAt","earnedAmount","category","hasOne","BadgeCategory","isEnabled","users","hasMany","badges","UserBadge","user","badge","isPrimary","assignedAt","BadgeItemPage","oninit","vnode","view","Page","BadgeModal","loading","className","title","app","translator","trans","content","toArray","attrs","userBadgeData","forum","confirm","then","hide","items","ItemList","add","e","preventDefault","modal","show","GiveBadgeModal","fullTime","transChoice","count","Modal","BadgesOverviewPage","BadgesProfilePage","loadUser","m","route","param","UserBadgeList","component","UserPage","selectedBadge","userHasBadge","store","createRecord","Stream","availableBadges","find","include","badgeCategories","redraw","fields","target","value","getById","checkUserHasBadge","map","foundBadge","userBadges","userBadge","onsubmit","save","relationships","response","handleErrors","oncreate","$","tooltip","Component","categories","categoryId","push","Object","keys","length","sort","a","b","initializers","models","User","prototype","userPrimaryBadge","routes","path","extend","LinkButton","href","username","UserControls"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\r\n","export { default } from \"../inheritsLoose/_index.mjs\"","import setPrototypeOf from \"@babel/runtime/helpers/setPrototypeOf\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import Model from \"flarum/Model\";\nimport mixin from \"flarum/utils/mixin\";\nimport BadgeModal from \"../../forum/components/BadgeModal\";\n\nexport default class Badge extends mixin(Model, {\n  name: Model.attribute(\"name\"),\n  icon: Model.attribute(\"icon\"),\n  order: Model.attribute(\"order\"),\n  image: Model.attribute(\"image\"),\n  description: Model.attribute(\"description\"),\n  isVisible: Model.attribute(\"isVisible\"),\n  createdAt: Model.attribute(\"createdAt\"),\n  earnedAmount: Model.attribute(\"earnedAmount\"),\n  category: Model.hasOne(\"category\"),\n}) {\n  apiEndpoint() {\n    return \"/badges\" + (this.exists ? \"/\" + this.data.id : \"\");\n  }\n}\n","import Model from \"flarum/Model\";\nimport mixin from \"flarum/utils/mixin\";\n\nexport default class BadgeCategory extends mixin(Model, {\n  name: Model.attribute(\"name\"),\n  isEnabled: Model.attribute(\"isEnabled\"),\n  createdAt: Model.attribute(\"createdAt\"),\n  users: Model.hasMany(\"users\"),\n  badges: Model.hasMany(\"badges\"),\n}) {\n  apiEndpoint() {\n    return \"/user_categories\" + (this.exists ? \"/\" + this.data.id : \"\");\n  }\n}\n","import Model from \"flarum/Model\";\nimport mixin from \"flarum/utils/mixin\";\n\nexport default class UserBadge extends mixin(Model, {\n  user: Model.hasOne(\"user\"),\n  badge: Model.hasOne(\"badge\"),\n  description: Model.attribute(\"description\"),\n  isPrimary: Model.attribute(\"isPrimary\"),\n  assignedAt: Model.attribute(\"assignedAt\"),\n}) {\n  apiEndpoint() {\n    return \"/user_badges\" + (this.exists ? \"/\" + this.data.id : \"\");\n  }\n}\n","import Page from \"flarum/components/Page\";\n\nexport default class BadgeItemPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n\n  view() {\n    return <p>Badge page</p>;\n  }\n}\n","import Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\nimport fullTime from \"flarum/helpers/fullTime\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport Link from \"flarum/components/Link\";\nimport GiveBadgeModal from \"./GiveBadgeModal\";\n\nexport default class BadgeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = false;\n  }\n\n  className() {\n    return \"Modal--small\";\n  }\n\n  title() {\n    return app.translator.trans(\n      \"v17development-flarum-badges.forum.badge_information\"\n    );\n  }\n\n  content() {\n    return (\n      <div>\n        <div className=\"Modal-body\">{this.data().toArray()}</div>\n        {this.attrs.userBadgeData && app.forum.attribute(\"canGiveBadge\") && (\n          <div className=\"Modal-footer\">\n            <Button\n              className={\"Button Button--primary\"}\n              onclick={() => {\n                if (\n                  confirm(\n                    app.translator.trans(\n                      \"v17development-flarum-badges.forum.moderation.remove_badge_confirm\"\n                    )\n                  )\n                ) {\n                  this.loading = true;\n                  this.attrs.userBadgeData.delete().then(() => this.hide());\n                }\n              }}\n              loading={this.loading}\n            >\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.moderation.remove_badge\"\n              )}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  data() {\n    const items = new ItemList();\n\n    // Badge name\n    items.add(\n      \"name\",\n      <div className={\"BadgeModalListItem\"}>\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.name\"\n            )}\n            :\n          </b>\n        </p>\n        <p>{this.attrs.badge.name()}</p>\n      </div>\n    );\n\n    // Badge description\n    items.add(\n      \"description\",\n      <div className={\"BadgeModalListItem\"}>\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.description\"\n            )}\n            :\n          </b>\n        </p>\n        <p>{this.attrs.badge.description()}</p>\n      </div>\n    );\n\n    // Badge earning reason\n    if (\n      this.attrs.userBadgeData &&\n      (this.attrs.userBadgeData.description() ||\n        app.forum.attribute(\"canGiveBadge\"))\n    ) {\n      items.add(\n        \"earning_reason\",\n        <div className={\"BadgeModalListItem\"}>\n          <p>\n            <b>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.badge.earning_reason\"\n              )}\n              :\n            </b>\n          </p>\n\n          <p>\n            {this.attrs.userBadgeData.description() ? (\n              this.attrs.userBadgeData.description()\n            ) : (\n              <i>\n                {app.translator.trans(\n                  \"v17development-flarum-badges.forum.badge.no_earning_reason\"\n                )}\n              </i>\n            )}\n          </p>\n          <p>\n            {app.forum.attribute(\"canGiveBadge\") && (\n              <a\n                href={\"#\"}\n                onclick={(e) => {\n                  e.preventDefault();\n                  app.modal.show(GiveBadgeModal, {\n                    badge: this.attrs.userBadgeData,\n                  });\n                }}\n              >\n                {app.translator.trans(\n                  \"v17development-flarum-badges.forum.badge.update_earning_reason\"\n                )}\n              </a>\n            )}\n          </p>\n        </div>\n      );\n    }\n\n    // Badge earned on\n    if (this.attrs.userBadgeData) {\n      items.add(\n        \"earned_date\",\n        <div className={\"BadgeModalListItem\"}>\n          <p>\n            <b>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.badge.earned_on\"\n              )}\n              :\n            </b>\n          </p>\n          <p>{fullTime(this.attrs.userBadgeData.assignedAt())}</p>\n        </div>\n      );\n    }\n\n    // Badge category\n    if (this.attrs.userBadgeData) {\n      items.add(\n        \"category\",\n        <div className={\"BadgeModalListItem\"}>\n          <p>\n            <b>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.badge.category\"\n              )}\n              :\n            </b>\n          </p>\n          <p>\n            {this.attrs.badge.category().name()}\n            {/* <Link\n              href={app.route(\"badges.category\", {\n                category: this.attrs.badge.category().id(),\n              })}\n            >\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.all_badges\"\n              )}\n            </Link> */}\n          </p>\n        </div>\n      );\n    }\n\n    // Badge category\n    if (this.attrs.badge && this.attrs.badge.earnedAmount()) {\n      items.add(\n        \"earned_amount\",\n        <div className={\"BadgeModalListItem\"}>\n          <p>\n            {app.translator.transChoice(\n              \"v17development-flarum-badges.forum.badge.earned_count\",\n              this.attrs.badge.earnedAmount(),\n              {\n                count: this.attrs.badge.earnedAmount(),\n              }\n            )}\n          </p>\n        </div>\n      );\n    }\n\n    return items;\n  }\n}\n","import Page from \"flarum/components/Page\";\n\nexport default class BadgesOverviewPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n\n  view() {\n    return <p>Badge page</p>;\n  }\n}\n","import UserPage from \"flarum/components/UserPage\";\nimport UserBadgeList from \"./UserBadgeList\";\n\nexport default class BadgesProfilePage extends UserPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.user = null;\n\n    this.loadUser(m.route.param(\"username\"));\n  }\n\n  content() {\n    return UserBadgeList.component({\n      user: this.user,\n    });\n  }\n\n  show(user) {\n    super.show(user);\n    this.user = user;\n  }\n}\n","import Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport Select from \"flarum/components/Select\";\nimport Stream from \"flarum/utils/Stream\";\nimport BadgeModal from \"./BadgeModal\";\n\nexport default class GiveBadgeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    // Select image\n    this.selectedBadge = this.attrs.badge ? this.attrs.badge.badge() : null;\n\n    // Current user\n    this.user = this.attrs.badge ? this.attrs.badge.user() : this.attrs.user;\n\n    // User has badge\n    this.userHasBadge = false;\n\n    // Badge model\n    this.badge = this.attrs.badge\n      ? this.attrs.badge\n      : app.store.createRecord(\"userBadges\");\n\n    // Earning reason\n    this.description = Stream(this.badge.description());\n\n    // List of available bagges\n    this.availableBadges = [];\n\n    this.loading = false;\n\n    // Load all available badges\n    if (!this.attrs.badge) {\n      this.loading = true;\n\n      app.store\n        .find(\"badge_categories\", {\n          include: \"badges\",\n        })\n        .then((badgeCategories) => {\n          this.availableBadges = badgeCategories;\n\n          this.loading = false;\n\n          // Redraw\n          m.redraw();\n        });\n    } else {\n      this.availableBadges[this.selectedBadge.id()] = this.selectedBadge.name();\n    }\n  }\n\n  className() {\n    return \"Modal--small BadgeModal\";\n  }\n\n  title() {\n    return app.translator.trans(\n      `v17development-flarum-badges.forum.${\n        this.badge.exists ? \"update\" : \"give\"\n      }_badge`\n    );\n  }\n\n  content() {\n    return (\n      <div>\n        <div className=\"Modal-body\">\n          <div className=\"Form\">{this.fields().toArray()}</div>\n        </div>\n\n        <div className=\"Modal-footer\">\n          <Button\n            className={\"Button Button--primary\"}\n            type={\"submit\"}\n            loading={this.loading}\n            disabled={this.userHasBadge}\n          >\n            {app.translator.trans(\"core.forum.composer_edit.submit_button\")}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    // Badge selector\n    items.add(\n      \"badge\",\n      <div className=\"BadgeModalListItem\">\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.badge\"\n            )}\n          </b>\n        </p>\n\n        <div className={\"Select\"}>\n          <select\n            value={this.selectedBadge ? this.selectedBadge.id() : \"empty\"}\n            disabled={!!this.attrs.badge}\n            onchange={(e) => {\n              if (e.target.value === \"empty\") return;\n              this.selectedBadge = app.store.getById(\"badges\", e.target.value);\n\n              // Check if the user already has this badge\n              this.checkUserHasBadge(this.selectedBadge);\n            }}\n            className=\"Select-input FormControl\"\n          >\n            <option value={\"empty\"}>\n              {app.translator.trans(\n                \"v17development-flarum-badges.forum.select_badge\"\n              )}\n            </option>\n\n            {/* When no badge is selected, show all available badges */}\n            {!this.attrs.badge &&\n              this.availableBadges.map((category) => (\n                <optgroup label={category.name()}>\n                  {category.badges().map((badge) => (\n                    <option value={badge.id()}>{badge.name()}</option>\n                  ))}\n                </optgroup>\n              ))}\n\n            {/* When a badge is already assigned */}\n            {!!this.attrs.badge && (\n              <option value={this.selectedBadge.id()}>\n                {this.selectedBadge.name()}\n              </option>\n            )}\n          </select>\n          <i class=\"icon fas fa-caret-down Select-caret\"></i>\n        </div>\n\n        {this.userHasBadge && (\n          <p className={\"UserHasBadge\"}>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.user_has_badge\"\n            )}\n          </p>\n        )}\n      </div>,\n      30\n    );\n\n    // Badge description\n    items.add(\n      \"badge_description\",\n      <div className={\"BadgeModalListItem\"}>\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.description\"\n            )}\n            :\n          </b>\n        </p>\n        <p>\n          {this.selectedBadge\n            ? this.selectedBadge.description()\n            : app.translator.trans(\n                \"v17development-flarum-badges.forum.select_badge\"\n              )}\n        </p>\n      </div>,\n      30\n    );\n\n    // Badge earning reason\n    items.add(\n      \"description\",\n      <div className=\"BadgeModalListItem\">\n        <p>\n          <b>\n            {app.translator.trans(\n              \"v17development-flarum-badges.forum.badge.earning_reason\"\n            )}\n          </b>\n        </p>\n        <textarea\n          className=\"FormControl\"\n          placeholder={app.translator.trans(\n            \"v17development-flarum-badges.forum.badge.earning_reason\"\n          )}\n          bidi={this.description}\n        />\n      </div>,\n      30\n    );\n\n    return items;\n  }\n\n  checkUserHasBadge(badge) {\n    let foundBadge = false;\n\n    this.user.userBadges().map((userBadge) => {\n      if (userBadge.badge() == badge) {\n        foundBadge = true;\n      }\n    });\n\n    this.userHasBadge = foundBadge;\n\n    m.redraw();\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    this.badge\n      .save({\n        description: this.description(),\n        relationships: this.attrs.badge\n          ? {}\n          : {\n              badge: this.selectedBadge,\n              user: this.user,\n            },\n      })\n      .then(\n        () => {\n          // Re-open badge modal\n          if (this.attrs.badge) {\n            app.modal.show(BadgeModal, {\n              badge: this.attrs.badge.badge(),\n              userBadgeData: this.attrs.badge,\n            });\n          } else {\n            this.hide();\n          }\n\n          m.redraw();\n        },\n        (response) => {\n          this.loading = false;\n          this.handleErrors(response);\n        }\n      );\n  }\n}\n","import Component from \"flarum/Component\";\nimport BadgeModal from \"./BadgeModal\";\n\nexport default class UserBadge extends Component {\n  view() {\n    return (\n      <span\n        className=\"UserBadge\"\n        title={`${\n          this.attrs.badge.description() ? this.attrs.badge.description() : \"\"\n        }`}\n        onclick={() =>\n          app.modal.show(BadgeModal, {\n            badge: this.attrs.badge,\n            userBadgeData: this.attrs.userBadgeData,\n          })\n        }\n      >\n        <i className={this.attrs.badge.icon()} /> {this.attrs.badge.name()}\n      </span>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.$().tooltip();\n  }\n}\n","import Component from \"flarum/Component\";\nimport UserBadge from \"./UserBadge\";\n\nexport default class UserBadgeList extends Component {\n  view() {\n    const categories = {};\n\n    this.attrs.user.userBadges().map((userBadge) => {\n      const categoryId = userBadge.badge().category().id();\n\n      if (!categories[categoryId]) {\n        categories[categoryId] = [userBadge];\n      } else {\n        categories[categoryId].push(userBadge);\n      }\n    });\n\n    return (\n      <div className=\"UserBadges\">\n        {Object.keys(categories).length === 0 && (\n          <div className={\"Placeholder\"}>\n            <p>This user does not have any badges yet.</p>\n          </div>\n        )}\n\n        {Object.keys(categories).length >= 1 &&\n          Object.keys(categories).map((categoryId) => {\n            const category = categories[categoryId];\n\n            return (\n              <div>\n                <h3>{category[0].badge().category().name()}</h3>\n                {category\n                  .sort((a, b) => a.badge().order() - b.badge().order())\n                  .map((userBadge) => (\n                    <UserBadge\n                      badge={userBadge.badge()}\n                      userBadgeData={userBadge}\n                    />\n                  ))}\n              </div>\n            );\n          })}\n      </div>\n    );\n  }\n}\n","import { extend } from \"flarum/extend\";\nimport Model from \"flarum/Model\";\nimport User from \"flarum/models/User\";\nimport UserPage from \"flarum/components/UserPage\";\nimport UserControls from \"flarum/utils/UserControls\";\nimport LinkButton from \"flarum/components/LinkButton\";\nimport Button from \"flarum/components/Button\";\nimport Badge from \"../common/models/Badge\";\nimport BadgeCategory from \"../common/models/BadgeCategory\";\nimport UserBadge from \"../common/models/UserBadge\";\nimport BadgesProfilePage from \"./components/BadgesProfilePage\";\nimport BadgesOverviewPage from \"./components/BadgesOverviewPage\";\nimport BadgeItemPage from \"./components/BadgeItemPage\";\nimport GiveBadgeModal from \"./components/GiveBadgeModal\";\n\napp.initializers.add(\"v17development-flarum-badges\", (app) => {\n  app.store.models.badges = Badge;\n  app.store.models.badgeCategories = BadgeCategory;\n  app.store.models.userBadges = UserBadge;\n\n  User.prototype.userBadges = Model.hasMany(\"userBadges\");\n  User.prototype.userPrimaryBadge = Model.hasOne(\"userPrimaryBadge\");\n\n  // Add user badges to the user profile\n  app.routes[\"user.badges\"] = {\n    path: \"/u/:username/badges\",\n    component: BadgesProfilePage,\n  };\n\n  // Future\n  // // Badges overview page\n  // app.routes[\"badges\"] = {\n  //   path: \"/badges\",\n  //   component: BadgesOverviewPage,\n  // };\n\n  // // Badges overview page\n  // app.routes[\"badges.category\"] = {\n  //   path: \"/badges/category/:id\",\n  //   component: BadgesOverviewPage,\n  // };\n\n  // // Badge item page\n  // app.routes[\"badges.item\"] = {\n  //   path: \"/badges/:id\",\n  //   component: BadgeItemPage,\n  // };\n\n  // Add uploads to user page menu items\n  extend(UserPage.prototype, \"navItems\", function (items) {\n    items.add(\n      \"badges\",\n      LinkButton.component(\n        {\n          href: app.route(\"user.badges\", {\n            username: this.user.username(),\n          }),\n          name: \"badges\",\n          icon: \"fas fa-user-tag\",\n        },\n        [\n          app.translator.trans(\n            \"v17development-flarum-badges.forum.badge.badges\"\n          ),\n          <span className=\"Button-badge\">{this.user.userBadges().length}</span>,\n        ]\n      ),\n      90\n    );\n  });\n\n  extend(UserControls, \"moderationControls\", function (items, user) {\n    // User can give badges\n    if (app.forum.attribute(\"canGiveBadge\")) {\n      items.add(\n        \"test\",\n        <Button\n          icon=\"fas fa-user-tag\"\n          onclick={() =>\n            app.modal.show(GiveBadgeModal, {\n              user: user,\n            })\n          }\n        >\n          {app.translator.trans(\n            \"v17development-flarum-badges.forum.give_badge\"\n          )}\n        </Button>\n      );\n    }\n  });\n});\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Link'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/fullTime'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}