{"version":3,"sources":["webpack://@v17development/flarum-badges/webpack/bootstrap","webpack://@v17development/flarum-badges/./forum.js","webpack://@v17development/flarum-badges/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-badges/./node_modules/@babel/runtime/helpers/inheritsLoose/_index.mjs","webpack://@v17development/flarum-badges/./node_modules/@babel/runtime/helpers/setPrototypeOf/index.js","webpack://@v17development/flarum-badges/./src/common/models/Badge.js","webpack://@v17development/flarum-badges/./src/common/models/BadgeCategory.js","webpack://@v17development/flarum-badges/./src/common/models/UserBadge.js","webpack://@v17development/flarum-badges/./src/forum/components/BadgeItemPage.js","webpack://@v17development/flarum-badges/./src/forum/components/BadgeModal.js","webpack://@v17development/flarum-badges/./src/forum/components/BadgesOverviewPage.js","webpack://@v17development/flarum-badges/./src/forum/components/BadgesProfilePage.js","webpack://@v17development/flarum-badges/./src/forum/components/GiveBadgeModal.js","webpack://@v17development/flarum-badges/./src/forum/components/UserBadge.js","webpack://@v17development/flarum-badges/./src/forum/components/UserBadgeList.js","webpack://@v17development/flarum-badges/./src/forum/index.js","webpack://@v17development/flarum-badges/external \"flarum.core.compat['Component']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['Model']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Button']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Link']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/LinkButton']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Modal']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Page']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/Select']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['components/UserPage']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['extend']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['helpers/fullTime']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['models/User']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['utils/ItemList']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['utils/Stream']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['utils/UserControls']\"","webpack://@v17development/flarum-badges/external \"flarum.core.compat['utils/mixin']\""],"names":["Badge","apiEndpoint","exists","data","id","mixin","Model","name","attribute","icon","order","image","description","isVisible","createdAt","earnedAmount","category","hasOne","BadgeCategory","isEnabled","users","hasMany","badges","UserBadge","user","badge","isPrimary","assignedAt","BadgeItemPage","oninit","vnode","view","Page","BadgeModal","loading","className","title","app","translator","trans","content","toArray","attrs","userBadgeData","forum","confirm","then","hide","items","ItemList","add","e","preventDefault","modal","show","GiveBadgeModal","fullTime","transChoice","count","Modal","BadgesOverviewPage","BadgesProfilePage","loadUser","m","route","param","UserBadgeList","component","UserPage","selectedBadge","userHasBadge","store","createRecord","Stream","availableBadges","find","include","badgeCategories","redraw","fields","target","value","getById","checkUserHasBadge","map","foundBadge","userBadges","userBadge","onsubmit","save","relationships","response","handleErrors","oncreate","$","tooltip","Component","categories","push","Object","keys","length","sort","a","b","initializers","models","User","prototype","userPrimaryBadge","routes","path","extend","LinkButton","href","username","UserControls"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\r\n","export { default } from \"../inheritsLoose/_index.mjs\"","import setPrototypeOf from \"@babel/runtime/helpers/setPrototypeOf\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import Model from \"flarum/Model\";\r\nimport mixin from \"flarum/utils/mixin\";\r\nimport BadgeModal from \"../../forum/components/BadgeModal\";\r\n\r\nexport default class Badge extends mixin(Model, {\r\n  name: Model.attribute(\"name\"),\r\n  icon: Model.attribute(\"icon\"),\r\n  order: Model.attribute(\"order\"),\r\n  image: Model.attribute(\"image\"),\r\n  description: Model.attribute(\"description\"),\r\n  isVisible: Model.attribute(\"isVisible\"),\r\n  createdAt: Model.attribute(\"createdAt\"),\r\n  earnedAmount: Model.attribute(\"earnedAmount\"),\r\n  category: Model.hasOne(\"category\"),\r\n}) {\r\n  apiEndpoint() {\r\n    return \"/badges\" + (this.exists ? \"/\" + this.data.id : \"\");\r\n  }\r\n}\r\n","import Model from \"flarum/Model\";\r\nimport mixin from \"flarum/utils/mixin\";\r\n\r\nexport default class BadgeCategory extends mixin(Model, {\r\n  name: Model.attribute(\"name\"),\r\n  order: Model.attribute(\"order\"),\r\n  description: Model.attribute(\"description\"),\r\n  isEnabled: Model.attribute(\"isEnabled\"),\r\n  createdAt: Model.attribute(\"createdAt\"),\r\n  users: Model.hasMany(\"users\"),\r\n  badges: Model.hasMany(\"badges\"),\r\n}) {\r\n  apiEndpoint() {\r\n    return \"/badge_categories\" + (this.exists ? \"/\" + this.data.id : \"\");\r\n  }\r\n}\r\n","import Model from \"flarum/Model\";\r\nimport mixin from \"flarum/utils/mixin\";\r\n\r\nexport default class UserBadge extends mixin(Model, {\r\n  user: Model.hasOne(\"user\"),\r\n  badge: Model.hasOne(\"badge\"),\r\n  description: Model.attribute(\"description\"),\r\n  isPrimary: Model.attribute(\"isPrimary\"),\r\n  assignedAt: Model.attribute(\"assignedAt\"),\r\n}) {\r\n  apiEndpoint() {\r\n    return \"/user_badges\" + (this.exists ? \"/\" + this.data.id : \"\");\r\n  }\r\n}\r\n","import Page from \"flarum/components/Page\";\r\n\r\nexport default class BadgeItemPage extends Page {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n  }\r\n\r\n  view() {\r\n    return <p>Badge page</p>;\r\n  }\r\n}\r\n","import Modal from \"flarum/components/Modal\";\r\nimport Button from \"flarum/components/Button\";\r\nimport fullTime from \"flarum/helpers/fullTime\";\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport Link from \"flarum/components/Link\";\r\nimport GiveBadgeModal from \"./GiveBadgeModal\";\r\n\r\nexport default class BadgeModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.loading = false;\r\n  }\r\n\r\n  className() {\r\n    return \"Modal--small\";\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans(\r\n      \"v17development-flarum-badges.forum.badge_information\"\r\n    );\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div>\r\n        <div className=\"Modal-body\">{this.data().toArray()}</div>\r\n        {this.attrs.userBadgeData && app.forum.attribute(\"canGiveBadge\") && (\r\n          <div className=\"Modal-footer\">\r\n            <Button\r\n              className={\"Button Button--primary\"}\r\n              onclick={() => {\r\n                if (\r\n                  confirm(\r\n                    app.translator.trans(\r\n                      \"v17development-flarum-badges.forum.moderation.remove_badge_confirm\"\r\n                    )\r\n                  )\r\n                ) {\r\n                  this.loading = true;\r\n                  this.attrs.userBadgeData.delete().then(() => this.hide());\r\n                }\r\n              }}\r\n              loading={this.loading}\r\n            >\r\n              {app.translator.trans(\r\n                \"v17development-flarum-badges.forum.moderation.remove_badge\"\r\n              )}\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  data() {\r\n    const items = new ItemList();\r\n\r\n    // Badge name\r\n    items.add(\r\n      \"name\",\r\n      <div className={\"BadgeModalListItem\"}>\r\n        <p>\r\n          <b>\r\n            {app.translator.trans(\r\n              \"v17development-flarum-badges.forum.badge.name\"\r\n            )}\r\n            :\r\n          </b>\r\n        </p>\r\n        <p>{this.attrs.badge.name()}</p>\r\n      </div>\r\n    );\r\n\r\n    // Badge description\r\n    items.add(\r\n      \"description\",\r\n      <div className={\"BadgeModalListItem\"}>\r\n        <p>\r\n          <b>\r\n            {app.translator.trans(\r\n              \"v17development-flarum-badges.forum.badge.description\"\r\n            )}\r\n            :\r\n          </b>\r\n        </p>\r\n        <p>{this.attrs.badge.description()}</p>\r\n      </div>\r\n    );\r\n\r\n    // Badge earning reason\r\n    if (\r\n      this.attrs.userBadgeData &&\r\n      (this.attrs.userBadgeData.description() ||\r\n        app.forum.attribute(\"canGiveBadge\"))\r\n    ) {\r\n      items.add(\r\n        \"earning_reason\",\r\n        <div className={\"BadgeModalListItem\"}>\r\n          <p>\r\n            <b>\r\n              {app.translator.trans(\r\n                \"v17development-flarum-badges.forum.badge.earning_reason\"\r\n              )}\r\n              :\r\n            </b>\r\n          </p>\r\n\r\n          <p>\r\n            {this.attrs.userBadgeData.description() ? (\r\n              this.attrs.userBadgeData.description()\r\n            ) : (\r\n              <i>\r\n                {app.translator.trans(\r\n                  \"v17development-flarum-badges.forum.badge.no_earning_reason\"\r\n                )}\r\n              </i>\r\n            )}\r\n          </p>\r\n          <p>\r\n            {app.forum.attribute(\"canGiveBadge\") && (\r\n              <a\r\n                href={\"#\"}\r\n                onclick={(e) => {\r\n                  e.preventDefault();\r\n                  app.modal.show(GiveBadgeModal, {\r\n                    badge: this.attrs.userBadgeData,\r\n                  });\r\n                }}\r\n              >\r\n                {app.translator.trans(\r\n                  \"v17development-flarum-badges.forum.badge.update_earning_reason\"\r\n                )}\r\n              </a>\r\n            )}\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Badge earned on\r\n    if (this.attrs.userBadgeData) {\r\n      items.add(\r\n        \"earned_date\",\r\n        <div className={\"BadgeModalListItem\"}>\r\n          <p>\r\n            <b>\r\n              {app.translator.trans(\r\n                \"v17development-flarum-badges.forum.badge.earned_on\"\r\n              )}\r\n              :\r\n            </b>\r\n          </p>\r\n          <p>{fullTime(this.attrs.userBadgeData.assignedAt())}</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Badge category\r\n    if (this.attrs.userBadgeData) {\r\n      items.add(\r\n        \"category\",\r\n        <div className={\"BadgeModalListItem\"}>\r\n          <p>\r\n            <b>\r\n              {app.translator.trans(\r\n                \"v17development-flarum-badges.forum.badge.category\"\r\n              )}\r\n              :\r\n            </b>\r\n          </p>\r\n          <p>\r\n            {this.attrs.badge.category().name()}\r\n            {/* <Link\r\n              href={app.route(\"badges.category\", {\r\n                category: this.attrs.badge.category().id(),\r\n              })}\r\n            >\r\n              {app.translator.trans(\r\n                \"v17development-flarum-badges.forum.all_badges\"\r\n              )}\r\n            </Link> */}\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Badge category\r\n    if (this.attrs.badge && this.attrs.badge.earnedAmount()) {\r\n      items.add(\r\n        \"earned_amount\",\r\n        <div className={\"BadgeModalListItem\"}>\r\n          <p>\r\n            {app.translator.transChoice(\r\n              \"v17development-flarum-badges.forum.badge.earned_count\",\r\n              this.attrs.badge.earnedAmount(),\r\n              {\r\n                count: this.attrs.badge.earnedAmount(),\r\n              }\r\n            )}\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return items;\r\n  }\r\n}\r\n","import Page from \"flarum/components/Page\";\r\n\r\nexport default class BadgesOverviewPage extends Page {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n  }\r\n\r\n  view() {\r\n    return <p>Badge page</p>;\r\n  }\r\n}\r\n","import UserPage from \"flarum/components/UserPage\";\r\nimport UserBadgeList from \"./UserBadgeList\";\r\n\r\nexport default class BadgesProfilePage extends UserPage {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.user = null;\r\n\r\n    this.loadUser(m.route.param(\"username\"));\r\n  }\r\n\r\n  content() {\r\n    return UserBadgeList.component({\r\n      user: this.user,\r\n    });\r\n  }\r\n\r\n  show(user) {\r\n    super.show(user);\r\n    this.user = user;\r\n  }\r\n}\r\n","import Modal from \"flarum/components/Modal\";\r\nimport Button from \"flarum/components/Button\";\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport Select from \"flarum/components/Select\";\r\nimport Stream from \"flarum/utils/Stream\";\r\nimport BadgeModal from \"./BadgeModal\";\r\n\r\nexport default class GiveBadgeModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    // Select image\r\n    this.selectedBadge = this.attrs.badge ? this.attrs.badge.badge() : null;\r\n\r\n    // Current user\r\n    this.user = this.attrs.badge ? this.attrs.badge.user() : this.attrs.user;\r\n\r\n    // User has badge\r\n    this.userHasBadge = false;\r\n\r\n    // Badge model\r\n    this.badge = this.attrs.badge\r\n      ? this.attrs.badge\r\n      : app.store.createRecord(\"userBadges\");\r\n\r\n    // Earning reason\r\n    this.description = Stream(this.badge.description());\r\n\r\n    // List of available bagges\r\n    this.availableBadges = [];\r\n\r\n    this.loading = false;\r\n\r\n    // Load all available badges\r\n    if (!this.attrs.badge) {\r\n      this.loading = true;\r\n\r\n      app.store\r\n        .find(\"badge_categories\", {\r\n          include: \"badges\",\r\n        })\r\n        .then((badgeCategories) => {\r\n          this.availableBadges = badgeCategories;\r\n\r\n          this.loading = false;\r\n\r\n          // Redraw\r\n          m.redraw();\r\n        });\r\n    } else {\r\n      this.availableBadges[this.selectedBadge.id()] = this.selectedBadge.name();\r\n    }\r\n  }\r\n\r\n  className() {\r\n    return \"Modal--small BadgeModal\";\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans(\r\n      `v17development-flarum-badges.forum.${\r\n        this.badge.exists ? \"update\" : \"give\"\r\n      }_badge`\r\n    );\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div>\r\n        <div className=\"Modal-body\">\r\n          <div className=\"Form\">{this.fields().toArray()}</div>\r\n        </div>\r\n\r\n        <div className=\"Modal-footer\">\r\n          <Button\r\n            className={\"Button Button--primary\"}\r\n            type={\"submit\"}\r\n            loading={this.loading}\r\n            disabled={this.userHasBadge}\r\n          >\r\n            {app.translator.trans(\"core.forum.composer_edit.submit_button\")}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    // Badge selector\r\n    items.add(\r\n      \"badge\",\r\n      <div className=\"BadgeModalListItem\">\r\n        <p>\r\n          <b>\r\n            {app.translator.trans(\r\n              \"v17development-flarum-badges.forum.badge.badge\"\r\n            )}\r\n          </b>\r\n        </p>\r\n\r\n        <div className={\"Select\"}>\r\n          <select\r\n            value={this.selectedBadge ? this.selectedBadge.id() : \"empty\"}\r\n            disabled={!!this.attrs.badge}\r\n            onchange={(e) => {\r\n              if (e.target.value === \"empty\") return;\r\n              this.selectedBadge = app.store.getById(\"badges\", e.target.value);\r\n\r\n              // Check if the user already has this badge\r\n              this.checkUserHasBadge(this.selectedBadge);\r\n            }}\r\n            className=\"Select-input FormControl\"\r\n          >\r\n            <option value={\"empty\"}>\r\n              {app.translator.trans(\r\n                \"v17development-flarum-badges.forum.select_badge\"\r\n              )}\r\n            </option>\r\n\r\n            {/* When no badge is selected, show all available badges */}\r\n            {!this.attrs.badge &&\r\n              this.availableBadges.map((category) => (\r\n                <optgroup label={category.name()}>\r\n                  {category.badges().map((badge) => (\r\n                    <option value={badge.id()}>{badge.name()}</option>\r\n                  ))}\r\n                </optgroup>\r\n              ))}\r\n\r\n            {/* When a badge is already assigned */}\r\n            {!!this.attrs.badge && (\r\n              <option value={this.selectedBadge.id()}>\r\n                {this.selectedBadge.name()}\r\n              </option>\r\n            )}\r\n          </select>\r\n          <i class=\"icon fas fa-caret-down Select-caret\"></i>\r\n        </div>\r\n\r\n        {this.userHasBadge && (\r\n          <p className={\"UserHasBadge\"}>\r\n            {app.translator.trans(\r\n              \"v17development-flarum-badges.forum.user_has_badge\"\r\n            )}\r\n          </p>\r\n        )}\r\n      </div>,\r\n      30\r\n    );\r\n\r\n    // Badge description\r\n    items.add(\r\n      \"badge_description\",\r\n      <div className={\"BadgeModalListItem\"}>\r\n        <p>\r\n          <b>\r\n            {app.translator.trans(\r\n              \"v17development-flarum-badges.forum.badge.description\"\r\n            )}\r\n            :\r\n          </b>\r\n        </p>\r\n        <p>\r\n          {this.selectedBadge\r\n            ? this.selectedBadge.description()\r\n            : app.translator.trans(\r\n                \"v17development-flarum-badges.forum.select_badge\"\r\n              )}\r\n        </p>\r\n      </div>,\r\n      30\r\n    );\r\n\r\n    // Badge earning reason\r\n    items.add(\r\n      \"description\",\r\n      <div className=\"BadgeModalListItem\">\r\n        <p>\r\n          <b>\r\n            {app.translator.trans(\r\n              \"v17development-flarum-badges.forum.badge.earning_reason\"\r\n            )}\r\n          </b>\r\n        </p>\r\n        <textarea\r\n          className=\"FormControl\"\r\n          placeholder={app.translator.trans(\r\n            \"v17development-flarum-badges.forum.badge.earning_reason\"\r\n          )}\r\n          bidi={this.description}\r\n        />\r\n      </div>,\r\n      30\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  checkUserHasBadge(badge) {\r\n    let foundBadge = false;\r\n\r\n    this.user.userBadges().map((userBadge) => {\r\n      if (userBadge.badge() == badge) {\r\n        foundBadge = true;\r\n      }\r\n    });\r\n\r\n    this.userHasBadge = foundBadge;\r\n\r\n    m.redraw();\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.badge\r\n      .save({\r\n        description: this.description(),\r\n        relationships: this.attrs.badge\r\n          ? {}\r\n          : {\r\n              badge: this.selectedBadge,\r\n              user: this.user,\r\n            },\r\n      })\r\n      .then(\r\n        () => {\r\n          // Re-open badge modal\r\n          if (this.attrs.badge) {\r\n            app.modal.show(BadgeModal, {\r\n              badge: this.attrs.badge.badge(),\r\n              userBadgeData: this.attrs.badge,\r\n            });\r\n          } else {\r\n            this.hide();\r\n          }\r\n\r\n          m.redraw();\r\n        },\r\n        (response) => {\r\n          this.loading = false;\r\n          this.handleErrors(response);\r\n        }\r\n      );\r\n  }\r\n}\r\n","import Component from \"flarum/Component\";\r\nimport BadgeModal from \"./BadgeModal\";\r\n\r\nexport default class UserBadge extends Component {\r\n  view() {\r\n    // Hide badge when not enabled\r\n    if(!this.attrs.badge.isVisible()) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <span\r\n        className=\"UserBadge\"\r\n        title={`${\r\n          this.attrs.badge.description() ? this.attrs.badge.description() : \"\"\r\n        }`}\r\n        onclick={() =>\r\n          app.modal.show(BadgeModal, {\r\n            badge: this.attrs.badge,\r\n            userBadgeData: this.attrs.userBadgeData,\r\n          })\r\n        }\r\n      >\r\n        <i className={this.attrs.badge.icon()} /> {this.attrs.badge.name()}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  oncreate(vnode) {\r\n    super.oncreate(vnode);\r\n\r\n    this.$().tooltip();\r\n  }\r\n}\r\n","import Component from \"flarum/Component\";\r\nimport UserBadge from \"./UserBadge\";\r\n\r\nexport default class UserBadgeList extends Component {\r\n  view() {\r\n    const categories = {};\r\n\r\n    this.attrs.user.userBadges().map((userBadge) => {\r\n      const category = userBadge.badge().category();\r\n\r\n      if (!categories[category.id()]) {\r\n        categories[category.id()] = {\r\n          category,\r\n          badges: [userBadge]\r\n        };\r\n      } else {\r\n        categories[category.id()].badges.push(userBadge);\r\n      }\r\n    });\r\n\r\n    return (\r\n      <div className=\"UserBadges\">\r\n        {Object.keys(categories).length === 0 && (\r\n          <div className={\"Placeholder\"}>\r\n            <p>This user does not have any badges yet.</p>\r\n          </div>\r\n        )}\r\n\r\n        {Object.keys(categories).length >= 1 &&\r\n          Object.keys(categories)\r\n            .sort((a, b) => categories[a].category.order() - categories[b].category.order())\r\n            .map(id => {\r\n              const category = categories[id].category;\r\n              const badges = categories[id].badges;\r\n\r\n              if(!category.isEnabled()) return null;\r\n\r\n              return (\r\n                <div className={\"UserBadgesCategory\"}>\r\n                  <h3>{category.name()}</h3>\r\n\r\n                  {category.description() && (\r\n                    <p>{category.description()}</p>\r\n                  )}\r\n\r\n                  {badges\r\n                    .sort((a, b) => a.badge().order() - b.badge().order())\r\n                    .map((userBadge) => (\r\n                      <UserBadge\r\n                        badge={userBadge.badge()}\r\n                        userBadgeData={userBadge}\r\n                      />\r\n                    ))}\r\n                </div>\r\n              );\r\n            })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { extend } from \"flarum/extend\";\r\nimport Model from \"flarum/Model\";\r\nimport User from \"flarum/models/User\";\r\nimport UserPage from \"flarum/components/UserPage\";\r\nimport UserControls from \"flarum/utils/UserControls\";\r\nimport LinkButton from \"flarum/components/LinkButton\";\r\nimport Button from \"flarum/components/Button\";\r\nimport Badge from \"../common/models/Badge\";\r\nimport BadgeCategory from \"../common/models/BadgeCategory\";\r\nimport UserBadge from \"../common/models/UserBadge\";\r\nimport BadgesProfilePage from \"./components/BadgesProfilePage\";\r\nimport BadgesOverviewPage from \"./components/BadgesOverviewPage\";\r\nimport BadgeItemPage from \"./components/BadgeItemPage\";\r\nimport GiveBadgeModal from \"./components/GiveBadgeModal\";\r\n\r\napp.initializers.add(\"v17development-flarum-badges\", (app) => {\r\n  app.store.models.badges = Badge;\r\n  app.store.models.badgeCategories = BadgeCategory;\r\n  app.store.models.userBadges = UserBadge;\r\n\r\n  User.prototype.userBadges = Model.hasMany(\"userBadges\");\r\n  User.prototype.userPrimaryBadge = Model.hasOne(\"userPrimaryBadge\");\r\n\r\n  // Add user badges to the user profile\r\n  app.routes[\"user.badges\"] = {\r\n    path: \"/u/:username/badges\",\r\n    component: BadgesProfilePage,\r\n  };\r\n\r\n  // Future\r\n  // // Badges overview page\r\n  // app.routes[\"badges\"] = {\r\n  //   path: \"/badges\",\r\n  //   component: BadgesOverviewPage,\r\n  // };\r\n\r\n  // // Badges overview page\r\n  // app.routes[\"badges.category\"] = {\r\n  //   path: \"/badges/category/:id\",\r\n  //   component: BadgesOverviewPage,\r\n  // };\r\n\r\n  // // Badge item page\r\n  // app.routes[\"badges.item\"] = {\r\n  //   path: \"/badges/:id\",\r\n  //   component: BadgeItemPage,\r\n  // };\r\n\r\n  // Add uploads to user page menu items\r\n  extend(UserPage.prototype, \"navItems\", function (items) {\r\n    items.add(\r\n      \"badges\",\r\n      LinkButton.component(\r\n        {\r\n          href: app.route(\"user.badges\", {\r\n            username: this.user.username(),\r\n          }),\r\n          name: \"badges\",\r\n          icon: \"fas fa-user-tag\",\r\n        },\r\n        [\r\n          app.translator.trans(\r\n            \"v17development-flarum-badges.forum.badge.badges\"\r\n          ),\r\n          <span className=\"Button-badge\">{this.user.userBadges().length}</span>,\r\n        ]\r\n      ),\r\n      90\r\n    );\r\n  });\r\n\r\n  extend(UserControls, \"moderationControls\", function (items, user) {\r\n    // User can give badges\r\n    if (app.forum.attribute(\"canGiveBadge\")) {\r\n      items.add(\r\n        \"test\",\r\n        <Button\r\n          icon=\"fas fa-user-tag\"\r\n          onclick={() =>\r\n            app.modal.show(GiveBadgeModal, {\r\n              user: user,\r\n            })\r\n          }\r\n        >\r\n          {app.translator.trans(\r\n            \"v17development-flarum-badges.forum.give_badge\"\r\n          )}\r\n        </Button>\r\n      );\r\n    }\r\n  });\r\n});\r\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Link'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/fullTime'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}